# 打包说明

## 方法一：使用批处理脚本（推荐）

1. **双击运行 `打包程序.bat`**
   - 脚本会自动检查并安装PyInstaller
   - 自动清理旧文件
   - 自动打包程序

2. **打包完成后**
   - 可执行文件位于 `dist\番茄计时器.exe`
   - 可以直接运行，也可以复制到其他电脑使用

## 方法二：手动打包

### 1. 安装PyInstaller

```bash
pip install pyinstaller
```

### 2. 执行打包命令

```bash
pyinstaller --name=番茄计时器 --onefile --windowed pomodoro_timer.py
```

### 3. 打包参数说明

- `--name=番茄计时器`：生成的可执行文件名称
- `--onefile`：打包成单个exe文件（推荐）
- `--windowed`：不显示控制台窗口（GUI程序）
- `--icon=NONE`：可以添加 `--icon=图标.ico` 来设置程序图标

### 4. 高级打包（包含所有依赖）

```bash
pyinstaller --name=番茄计时器 ^
    --onefile ^
    --windowed ^
    --hidden-import=win32timezone ^
    --hidden-import=win32api ^
    --collect-all=win10toast ^
    pomodoro_timer.py
```

## 打包后的文件

打包完成后会生成：
- `dist/番茄计时器.exe` - 可执行文件（这就是你需要的）
- `build/` - 临时文件（可以删除）
- `番茄计时器.spec` - 打包配置文件（可以删除）

## 使用打包后的程序

1. **直接运行**：双击 `dist\番茄计时器.exe` 即可运行
2. **分发使用**：
   - 将 `番茄计时器.exe` 复制到任何Windows电脑
   - 不需要安装Python或任何依赖
   - 首次运行可能会被杀毒软件拦截，选择"允许"即可

## 注意事项

1. **文件大小**：打包后的exe文件大约30-50MB（包含Python解释器和所有依赖）
2. **首次运行**：Windows可能会提示"未知发布者"，点击"更多信息"→"仍要运行"
3. **杀毒软件**：某些杀毒软件可能误报，这是正常现象，添加信任即可
4. **配置文件**：程序会在运行目录创建 `pomodoro_config.json` 保存设置

## 添加程序图标（可选）

1. 准备一个 `.ico` 格式的图标文件（如 `icon.ico`）
2. 修改打包命令：
```bash
pyinstaller --name=番茄计时器 --onefile --windowed --icon=icon.ico pomodoro_timer.py
```

## 常见问题

### Q: 打包失败怎么办？
A: 检查是否安装了所有依赖：`pip install -r requirements.txt`

### Q: exe文件太大怎么办？
A: 使用 `--onefile` 会包含所有依赖，这是正常的。如果不需要单文件，可以去掉这个参数。

### Q: 在其他电脑上无法运行？
A: 确保是Windows系统，且是64位系统（如果Python是64位）。某些老系统可能需要安装Visual C++运行库。

### Q: 如何减小文件大小？
A: 可以使用 `--exclude-module` 排除不需要的模块，但可能影响功能。

